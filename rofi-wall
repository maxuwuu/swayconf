#!/bin/bash

WALLPAPER_DIR="$HOME/Walls"
CONFIG_FILE="$HOME/.config/wallpaper.conf"

mkdir -p "$HOME/.config"

# Resim dosyalarını filtrele (jpg, png, jpeg)
files=$(find "$WALLPAPER_DIR" -maxdepth 1 -type f \( -iname '*.jpg' -o -iname '*.png' -o -iname '*.jpeg' \) -printf '%f\n')

# Rofi ile seçim
selected=$(echo "$files" | rofi -dmenu -p "Select Wallpaper")

if [[ -n "$selected" ]]; then
    pkill swaybg 2>/dev/null
    swaybg -i "$WALLPAPER_DIR/$selected" -m fill &
    echo "$WALLPAPER_DIR/$selected" > "$CONFIG_FILE"
fi